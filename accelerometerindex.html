<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="en"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="en"><!--<![endif]-->
    <!-- the "no-js" class is for Modernizr. -->
    
    <head data-template-set="html5-reset">
        
        <meta charset="utf-8">
            
            <title>PhoneGap Tests : Accelerometer</title>	
            
            <meta name="author" content="AJL Development :: Adam J Lea">
                <meta name="Copyright" content="Copyright AJLDevelopment 2012 All Rights Reserved.">
                    
                    <!--  Mobile Viewport Fix
                     j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
                     device-width : Occupy full width of the screen in its current orientation
                     initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
                     maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
                     -->
                    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
                        
                        <!-- CSS: screen, mobile & print are all in the same file -->
                        <link rel="stylesheet" href="_/css/style.css">
                            
                            <!-- all our JS is at the bottom of the page, except for Modernizr. -->
                            <script src="_/js/modernizr-1.7.min.js"></script>
                            
                            <script>
                                
                                var watchID = null;
                                
                                function onLoad () {
                                    document.addEventListener("deviceready", onDeviceReady, false);
                                }    
                                
                                // OK PhoneGap is ready
                                
                                function onDeviceReady (){
                                    startWatch();
                                }
                                
                                // start watching acceleration
                                function startWatch(){
                                    // update accelerometer every 3 seconds
                                    var options = { frequency: 3000 };
                                    
                                    watchID = navigator.accelerometer.watchAcceleration(onSuccess, onError, options);
                                }
                                
                                // stop watching acceleration
                                function stopWatch(){
                                    if (watchID) {
                                        navigator.accelerometer.clearWatch(watchID);
                                        watchID = null;
                                    }
                                }
                                
                                // onSuccess: get a snapshot of the current acceleration
                                function onSuccess(acceleration){
                                    var element = document.getElementById('accelerometer');
                                    element.innerHTML = 'Acceleration X: ' + acceleration.x + '<br />' +
                                    'Acceleration Y: ' + acceleration.y + '<br />' +
                                    'Acceleration Z: ' + acceleration.z + '<br />' +
                                    'Timestamp: '      + acceleration.timestamp + '<br />';
                                }
                                
                                // onError: Failed to get acceleration
                                function onError(){
                                    alert('OOOPS!');
                                }
                                
                                
                                </script>
                            
    </head>
    
    <body onload="onLoad()">
        
        <div id="accelerometer">Waiting for accelerometer...</div>
        <button onclick="stopWatch();">Stop Watching</button>
        
        
        <!-- here comes the javascript -->
        <!-- Grab local PhoneGap -->
        <script src="_/js/phonegap-1.3.0.js"></script>
        
        
        <!-- this is where we put our custom functions -->
        <script src="_/js/functions.js"></script>
        
    </body>
</html>